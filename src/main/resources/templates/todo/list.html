<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Todo Î™©Î°ù</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0f2f5;
            min-height: 100vh;
            padding: 40px 20px;
            color: #333;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        /* ÏÉÅÎã® Ïú†Ï†Ä Î∞î */
        .topbar {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .user-greeting {
            font-size: 14px;
            color: #555;
        }

        .user-greeting span {
            font-weight: 700;
            color: #4f46e5;
        }

        .btn-logout {
            background: none;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 6px 14px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn-logout:hover {
            background-color: #f3f4f6;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            color: #1a1a2e;
        }

        .btn-add {
            background-color: #4f46e5;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        .btn-add:hover { background-color: #4338ca; }

        .empty-box {
            text-align: center;
            padding: 60px 0;
            color: #aaa;
            font-size: 16px;
            background: white;
            border-radius: 12px;
        }

        .todo-list { display: flex; flex-direction: column; gap: 12px; }

        .todo-card {
            background: white;
            border-radius: 12px;
            padding: 18px 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.07);
            transition: box-shadow 0.2s;
        }

        .todo-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.12); }

        .todo-card.done { opacity: 0.55; }

        .todo-card.done .todo-title {
            text-decoration: line-through;
            color: #999;
        }

        .todo-card input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #4f46e5;
            cursor: pointer;
            flex-shrink: 0;
        }

        .todo-content { flex: 1; min-width: 0; }

        .todo-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .todo-desc {
            font-size: 13px;
            color: #888;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .btn-delete {
            background: none;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 13px;
            color: #ef4444;
            cursor: pointer;
            flex-shrink: 0;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .btn-delete:hover {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- Ïú†Ï†Ä Ï†ïÎ≥¥ + Î°úÍ∑∏ÏïÑÏõÉ -->
    <div class="topbar">
        <span class="user-greeting">ÏïàÎÖïÌïòÏÑ∏Ïöî, <span th:text="${nickname}">ÎãâÎÑ§ÏûÑ</span>Îãò!</span>
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="btn-logout">Î°úÍ∑∏ÏïÑÏõÉ</button>
        </form>
    </div>

    <div class="header">
        <h1>üìù Todo Î™©Î°ù</h1>
        <a th:href="@{/todos/new}" class="btn-add">+ ÏÉà Todo</a>
    </div>

    <!-- Î™©Î°ùÏù¥ ÎπÑÏñ¥ÏûàÏùÑ Îïå -->
    <div class="empty-box" th:if="${#lists.isEmpty(todos)}">
        Îì±Î°ùÎêú TodoÍ∞Ä ÏóÜÏäµÎãàÎã§. ÏÉà TodoÎ•º Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî!
    </div>

    <!-- Î™©Î°ù -->
    <div class="todo-list" th:unless="${#lists.isEmpty(todos)}">
        <div class="todo-card" th:each="todo : ${todos}" th:classappend="${todo.done} ? 'done'">

            <!-- ÏôÑÎ£å Ï≤¥ÌÅ¨Î∞ïÏä§ -->
            <form th:action="@{/todos/{id}/done(id=${todo.id})}" method="post">
                <input type="checkbox"
                       name="isDone"
                       value="true"
                       th:checked="${todo.done}"
                       onchange="this.form.submit()"
                       title="ÏôÑÎ£å Ï≤òÎ¶¨">
            </form>

            <!-- Todo ÎÇ¥Ïö© -->
            <div class="todo-content">
                <div class="todo-title" th:text="${todo.title}">Ï†úÎ™©</div>
                <div class="todo-desc"
                     th:if="${todo.description != null and !todo.description.isEmpty()}"
                     th:text="${todo.description}">ÏÑ§Î™Ö</div>
            </div>

            <!-- ÏÇ≠Ï†ú Î≤ÑÌäº -->
            <form th:action="@{/todos/{id}/delete(id=${todo.id})}" method="post">
                <button type="submit" class="btn-delete"
                        onclick="return confirm('ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</button>
            </form>

        </div>
    </div>

</div>

</body>
</html>
